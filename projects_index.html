<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo de Proyectos IoT - 80 Ideas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-text {
            background: linear-gradient(to right, #4f46e5, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 0;
            border: none;
            border-radius: 1rem;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            padding: 1.5rem;
            background: linear-gradient(135deg, #4f46e5 0%, #06b6d4 100%);
            color: white;
            border-radius: 1rem 1rem 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 2rem;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            opacity: 0.9;
        }

        .close:hover {
            opacity: 1;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <i class="fas fa-network-wired text-3xl text-indigo-600"></i>
                <h1 class="text-2xl font-bold text-gray-800">IoT Projects <span class="text-indigo-600">Hub</span></h1>
            </div>
            <div class="text-sm text-gray-500">
                80 Proyectos Generados
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">

        <!-- Search -->
        <div class="mb-8 max-w-2xl mx-auto">
            <div class="relative">
                <i class="fas fa-search absolute left-4 top-3.5 text-gray-400"></i>
                <input type="text" id="searchInput" placeholder="Buscar proyecto..."
                    class="w-full pl-12 pr-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition shadow-sm">
            </div>
        </div>

        <!-- Categories Navigation -->
        <div class="flex flex-wrap gap-2 justify-center mb-12" id="categoryFilters">
            <button class="px-4 py-2 rounded-full bg-indigo-600 text-white font-medium shadow-md"
                onclick="filterProjects('all')">Todos</button>
            <button class="px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"
                onclick="filterProjects('Smart City')">üèôÔ∏è Smart City</button>
            <button class="px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"
                onclick="filterProjects('Industrial')">üè≠ Industrial</button>
            <button class="px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"
                onclick="filterProjects('Healthcare')">üè• Salud</button>
            <button class="px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"
                onclick="filterProjects('Agriculture')">üå± Agro</button>
            <button class="px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"
                onclick="filterProjects('Retail')">üõí Retail</button>
            <button class="px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"
                onclick="filterProjects('Entertainment')">üéÆ Ocio</button>
            <button class="px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"
                onclick="filterProjects('Security')">üõ°Ô∏è Seguridad</button>
            <button class="px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"
                onclick="filterProjects('Gym')">üèãÔ∏è Gym</button>
            <button class="px-4 py-2 rounded-full bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"
                onclick="filterProjects('Maps')">üó∫Ô∏è Mapas</button>
        </div>

        <!-- Projects Grid -->
        <div id="projectsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Projects will be injected here via JS -->
        </div>

    </main>

    <!-- Modal -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle" class="text-2xl font-bold"></h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <script>
        // Data generated from the previous step
        const projects = [
            // Smart City
            { id: 1, cat: 'Smart City', name: 'Sem√°foro Inteligente Adaptativo', desc: 'Control de tr√°fico que cambia seg√∫n la densidad de autos detectada.' },
            { id: 2, cat: 'Smart City', name: 'Sistema de Parking P√∫blico', desc: 'Sensores en plazas de calle que gu√≠an a los conductores a lugares libres v√≠a app.' },
            { id: 3, cat: 'Smart City', name: 'Alumbrado P√∫blico Eficiente', desc: 'Farolas que aumentan intensidad solo cuando detectan peatones o veh√≠culos.' },
            { id: 4, cat: 'Smart City', name: 'Gesti√≥n de Residuos Urbanos', desc: 'Contenedores que avisan a los camiones cuando est√°n llenos para optimizar rutas.' },
            { id: 5, cat: 'Smart City', name: 'Monitoreo de Calidad del Aire', desc: 'Estaciones en paradas de bus que miden CO2 y recomiendan uso de mascarilla.' },
            { id: 6, cat: 'Smart City', name: 'Alerta de Inundaciones', desc: 'Sensores en alcantarillas y r√≠os que activan sirenas y barreras autom√°ticas.' },
            { id: 7, cat: 'Smart City', name: 'Parada de Bus Inteligente', desc: 'Pantalla que muestra ubicaci√≥n real del bus y permite solicitar parada para discapacitados.' },
            { id: 8, cat: 'Smart City', name: 'Riego de Parques P√∫blicos', desc: 'Sistema que riega solo si la humedad del suelo es baja y no hay previsi√≥n de lluvia.' },
            { id: 9, cat: 'Smart City', name: 'Detecci√≥n de Disparos Ruidos', desc: 'Triangulaci√≥n de sonidos fuertes para alertar a polic√≠a en zonas peligrosas.' },
            { id: 10, cat: 'Smart City', name: 'Kiosco de Informaci√≥n Tur√≠stica', desc: 'Pantalla interactiva que sugiere rutas y env√≠a mapas al m√≥vil del turista.' },

            // Industrial
            { id: 11, cat: 'Industrial', name: 'Brazo Rob√≥tico Clasificador', desc: 'Cinta transportadora que separa objetos por color usando sensores RGB.' },
            { id: 12, cat: 'Industrial', name: 'Monitor de Vibraci√≥n de Maquinaria', desc: 'Detecta patrones an√≥malos en motores para predecir fallos (Mantenimiento Predictivo).' },
            { id: 13, cat: 'Industrial', name: 'Control de Tanques Qu√≠micos', desc: 'Monitoreo de nivel, presi√≥n y temperatura con v√°lvulas de alivio autom√°ticas.' },
            { id: 14, cat: 'Industrial', name: 'Sistema Andon Digital', desc: 'Botoneras en l√≠neas de montaje para alertar problemas y detener la producci√≥n.' },
            { id: 15, cat: 'Industrial', name: 'Rastreo de Activos en Almac√©n', desc: 'Localizaci√≥n precisa de montacargas y pallets dentro de una nave industrial.' },
            { id: 16, cat: 'Industrial', name: 'Control de Acceso Biom√©trico', desc: 'Puertas de seguridad que requieren huella/RFID y registran entradas en tiempo real.' },
            { id: 17, cat: 'Industrial', name: 'Gesti√≥n de Cadena de Fr√≠o', desc: 'Sensores en camiones frigor√≠ficos que alertan si la temperatura sube durante el transporte.' },
            { id: 18, cat: 'Industrial', name: 'Medidor de Consumo Energ√©tico Industrial', desc: 'Dashboard que muestra el gasto el√©ctrico por m√°quina en tiempo real.' },
            { id: 19, cat: 'Industrial', name: 'Detector de Fugas de Gas', desc: 'Sensores distribuidos que cierran llaves de paso principales ante fugas.' },
            { id: 20, cat: 'Industrial', name: 'Silo de Granos Automatizado', desc: 'Control de humedad y temperatura interna para evitar fermentaci√≥n del grano.' },

            // Healthcare
            { id: 21, cat: 'Healthcare', name: 'Dispensador de Pastillas Inteligente', desc: 'Libera dosis a horas exactas y notifica a familiares si no se retira.' },
            { id: 22, cat: 'Healthcare', name: 'Cama de Hospital Inteligente', desc: 'Detecta si el paciente se levanta o si hay humedad (incontinencia).' },
            { id: 23, cat: 'Healthcare', name: 'Monitor de Beb√© Avanzado', desc: 'Analiza el llanto y monitorea respiraci√≥n/temperatura, alertando al m√≥vil.' },
            { id: 24, cat: 'Healthcare', name: 'Rehabilitaci√≥n con Sensores', desc: 'Guante con giroscopios que gamifica ejercicios de recuperaci√≥n de mano.' },
            { id: 25, cat: 'Healthcare', name: 'Refrigerador de Vacunas', desc: 'Control estricto de temperatura con bater√≠a de respaldo y alertas cr√≠ticas.' },
            { id: 26, cat: 'Healthcare', name: 'Bast√≥n para Ciegos Conectado', desc: 'Detecta obst√°culos con ultrasonido y avisa a cuidadores bot√≥n de p√°nico.' },
            { id: 27, cat: 'Healthcare', name: 'Sistema de Llamada a Enfermer√≠a', desc: 'Botones en habitaciones que priorizan urgencias en el smartwatch de enfermeras.' },
            { id: 28, cat: 'Healthcare', name: 'Control de Aforo en Salas de Espera', desc: 'Conteo de personas para mantener distancia social y ventilaci√≥n.' },
            { id: 29, cat: 'Healthcare', name: 'Chaleco de Seguridad para Obra', desc: 'Detecta ca√≠das, golpes de calor y ritmo card√≠aco de trabajadores.' },
            { id: 30, cat: 'Healthcare', name: 'Inodoro Inteligente', desc: 'Sensores b√°sicos que analizan frecuencia y tiempo de uso para salud digestiva.' },

            // Agriculture
            { id: 31, cat: 'Agriculture', name: 'Invernadero Automatizado', desc: 'Control total de ventanas, ventiladores, riego y luces UV seg√∫n el clima.' },
            { id: 32, cat: 'Agriculture', name: 'Comedero de Ganado Autom√°tico', desc: 'Dispensa alimento seg√∫n el RFID del animal y registra su consumo.' },
            { id: 33, cat: 'Agriculture', name: 'Drone de Monitoreo de Cultivos', desc: 'Estaci√≥n base que recibe datos de vuelo y estado de plantas.' },
            { id: 34, cat: 'Agriculture', name: 'Sistema de Acuapon√≠a', desc: 'Control del ciclo del agua entre peceras y plantas hidrop√≥nicas.' },
            { id: 35, cat: 'Agriculture', name: 'Espantap√°jaros L√°ser Sonoro', desc: 'Detecta movimiento de aves y activa disuasivos sin da√±ar a los animales.' },
            { id: 36, cat: 'Agriculture', name: 'Estaci√≥n Meteorol√≥gica Local', desc: 'Mide viento, lluvia y UV para automatizar toldos y riegos de la zona.' },
            { id: 37, cat: 'Agriculture', name: 'Monitor de Colmenas', desc: 'Mide peso (producci√≥n de miel) y zumbido (salud de la reina) en apiarios.' },
            { id: 38, cat: 'Agriculture', name: 'Control de Heladas', desc: 'Activa aspersores o calefactores en frutales cuando la temperatura baja de 0¬∞C.' },
            { id: 39, cat: 'Agriculture', name: 'Rastreo de Ganado GPS', desc: 'Collares que definen un "cerco virtual" y alertan si un animal sale de la zona.' },
            { id: 40, cat: 'Agriculture', name: 'Gesti√≥n de Silvicultura', desc: 'Sensores de humo en bosques remotos para detecci√≥n temprana de incendios.' },

            // Retail
            { id: 41, cat: 'Retail', name: 'Probador de Ropa Inteligente', desc: 'Espejo que detecta la prenda (RFID) y permite pedir otra talla desde la pantalla.' },
            { id: 42, cat: 'Retail', name: 'Estanter√≠a Inteligente', desc: 'Detecta cuando se retira un producto y avisa para reposici√≥n inmediata.' },
            { id: 43, cat: 'Retail', name: 'Carrito de Compra Auto-cobro', desc: 'Escanea productos al meterlos y cobra al salir sin pasar por caja.' },
            { id: 44, cat: 'Retail', name: 'Gesti√≥n de Colas', desc: 'Sensores que abren nuevas cajas autom√°ticamente cuando la fila supera X personas.' },
            { id: 45, cat: 'Retail', name: 'Vending Machine Conectada', desc: 'Reporta stock, fallos y permite pago/reserva desde app m√≥vil.' },
            { id: 46, cat: 'Retail', name: 'Etiquetas de Precio Electr√≥nicas', desc: 'Actualizaci√≥n centralizada de precios en g√≥ndolas v√≠a MQTT.' },
            { id: 47, cat: 'Retail', name: 'Cafeter√≠a Automatizada', desc: 'El cliente pide desde la mesa (QR) y la m√°quina prepara el caf√© en orden.' },
            { id: 48, cat: 'Retail', name: 'Lavander√≠a Autoservicio App', desc: 'Muestra qu√© m√°quinas est√°n libres y avisa cuando tu ropa est√° lista.' },
            { id: 49, cat: 'Retail', name: 'Control de Caducidad', desc: 'Sistema que alerta descuentos en productos pr√≥ximos a vencer en estanter√≠a.' },
            { id: 50, cat: 'Retail', name: 'Feedback de Cliente F√≠sico', desc: 'Botones de satisfacci√≥n en salida que alertan al gerente si hay muchas quejas.' },

            // Entertainment
            { id: 51, cat: 'Entertainment', name: 'Escape Room Dom√≥tico', desc: 'Sala donde las pistas activan mecanismos reales (abrir cajones, luces) v√≠a MQTT.' },
            { id: 52, cat: 'Entertainment', name: 'Tablero de Ajedrez Remoto', desc: 'Mueves piezas f√≠sicas y se mueven en el tablero del oponente en otro pa√≠s.' },
            { id: 53, cat: 'Entertainment', name: 'Simulador de Carreras', desc: 'Volante y pedales que env√≠an telemetr√≠a a un dashboard de ingeniero de pista.' },
            { id: 54, cat: 'Entertainment', name: 'Instrumentos Musicales Colaborativos', desc: 'Varios usuarios tocan desde sus casas y suena en una sala central.' },
            { id: 55, cat: 'Entertainment', name: 'Museo Interactivo', desc: 'Las obras "reaccionan" (luz, sonido) cuando el visitante se acerca.' },
            { id: 56, cat: 'Entertainment', name: 'Sistema de Votaci√≥n en Clases', desc: 'Botoneras f√≠sicas para alumnos para responder quiz en tiempo real.' },
            { id: 57, cat: 'Entertainment', name: 'Laboratorio de Qu√≠mica Remoto', desc: 'Brazo rob√≥tico que mezcla l√≠quidos peligrosos controlado por alumnos.' },
            { id: 58, cat: 'Entertainment', name: 'Marcador Deportivo LED', desc: 'Controlado desde m√≥vil para partidos de barrio, con bocina y tiempo.' },
            { id: 59, cat: 'Entertainment', name: 'Juguete Tamagotchi F√≠sico', desc: 'Mascota robot que "vive" en un servidor y interact√∫as con ella f√≠sicamente.' },
            { id: 60, cat: 'Entertainment', name: 'Teatro Automatizado', desc: 'Control de tel√≥n, luces y efectos de humo sincronizados con el guion.' },

            // Security
            { id: 61, cat: 'Security', name: 'Per√≠metro L√°ser Invisible', desc: 'Barreras l√°ser que al cortarse activan c√°maras y luces estrobosc√≥picas.' },
            { id: 62, cat: 'Security', name: 'Caja Fuerte Biom√©trica Remota', desc: 'Solo se abre si el usuario pone su huella Y aprueba desde la app m√≥vil.' },
            { id: 63, cat: 'Security', name: 'Dron Patrulla Aut√≥nomo', desc: 'Dron que recorre una ruta GPS y transmite video si detecta movimiento.' },
            { id: 64, cat: 'Security', name: 'Bot√≥n de P√°nico Vecinal', desc: 'Sistema comunitario donde al pulsar un bot√≥n f√≠sico, alerta a todos los vecinos en un mapa.' },
            { id: 65, cat: 'Security', name: 'Control de Acceso por Niveles', desc: 'Tarjetas RFID que dan acceso a diferentes zonas seg√∫n el rango del empleado.' },
            { id: 66, cat: 'Security', name: 'Detector de Inhibidores de Se√±al', desc: 'Alerta si detecta intentos de bloquear la se√±al WiFi/GSM de la alarma.' },
            { id: 67, cat: 'Security', name: 'Simulador de Presencia', desc: 'Enciende luces y TV aleatoriamente cuando la casa est√° en "Modo Vacaciones".' },

            // Gym
            { id: 68, cat: 'Gym', name: 'M√°quina de Pesas Conectada', desc: 'Cuenta repeticiones y series autom√°ticamente usando aceler√≥metros.' },
            { id: 69, cat: 'Gym', name: 'Mapa de Calor del Gimnasio', desc: 'Muestra en tiempo real qu√© m√°quinas est√°n ocupadas para evitar esperas.' },
            { id: 70, cat: 'Gym', name: 'Tapete de Yoga Inteligente', desc: 'Sensores de presi√≥n que corrigen tu postura si no est√°s bien alineado.' },
            { id: 71, cat: 'Gym', name: 'Bicicleta de Spinning Virtual', desc: 'La resistencia de la bici cambia seg√∫n la pendiente de la ruta en la pantalla.' },
            { id: 72, cat: 'Gym', name: 'Control de Hidrataci√≥n', desc: 'Botella inteligente que mide cu√°nto bebes y te avisa si est√°s deshidratado.' },
            { id: 73, cat: 'Gym', name: 'Acceso al Gym por Reconocimiento Facial', desc: 'Torno de entrada que te saluda y carga tu perfil de entrenamiento.' },
            { id: 74, cat: 'Gym', name: 'Cron√≥metro de Boxeo IoT', desc: 'Saco de boxeo que mide la fuerza y velocidad de los golpes.' },

            // Maps
            { id: 75, cat: 'Maps', name: 'Rastreo de Flota de Peligros', desc: 'Mapa en tiempo real de camiones con carga peligrosa y alertas de desv√≠o.' },
            { id: 76, cat: 'Maps', name: 'Geocercas para Ni√±os Mascotas', desc: 'Alerta inmediata si el tracker GPS sale de una zona segura (parque/casa).' },
            { id: 77, cat: 'Maps', name: 'Mapa de Densidad de Transporte', desc: 'Visualizaci√≥n en vivo de d√≥nde est√°n todos los buses/metros de la ciudad.' },
            { id: 78, cat: 'Maps', name: 'Monitoreo de Incendios Forestales', desc: 'Mapa que actualiza el avance del fuego seg√∫n sensores de temperatura en el bosque.' },
            { id: 79, cat: 'Maps', name: 'Rastreo de Activos Hospitalarios', desc: 'Mapa indoor para localizar d√≥nde est√° el desfibrilador o la silla de ruedas m√°s cercana.' },
            { id: 80, cat: 'Maps', name: 'Log√≠stica de √öltima Milla', desc: 'Mapa para el cliente que muestra exactamente d√≥nde est√° su repartidor en bici.' }
        ];

        function getFolderSlug(name) {
            return name.toLowerCase()
                .replace(/√°/g, 'a').replace(/√©/g, 'e').replace(/√≠/g, 'i').replace(/√≥/g, 'o').replace(/√∫/g, 'u').replace(/√±/g, 'n')
                .replace(/[^a-z0-9]+/g, '-')
                .replace(/^-+|-+$/g, '');
        }

        function getCategoryIcon(cat) {
            const icons = {
                'Smart City': 'fa-city text-blue-500',
                'Industrial': 'fa-industry text-gray-600',
                'Healthcare': 'fa-heartbeat text-red-500',
                'Agriculture': 'fa-leaf text-green-500',
                'Retail': 'fa-shopping-cart text-purple-500',
                'Entertainment': 'fa-gamepad text-yellow-500',
                'Security': 'fa-shield-alt text-indigo-500',
                'Gym': 'fa-dumbbell text-orange-500',
                'Maps': 'fa-map-marked-alt text-teal-500'
            };
            return icons[cat] || 'fa-project-diagram';
        }

        function renderProjects(filter = 'all') {
            const grid = document.getElementById('projectsGrid');
            grid.innerHTML = '';

            const filtered = filter === 'all'
                ? projects
                : projects.filter(p => p.cat === filter);

            filtered.forEach(p => {
                const slug = getFolderSlug(p.name);
                const folder = `project-${String(p.id).padStart(2, '0')}-${slug}`;

                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden card-hover transition-all duration-300';
                card.innerHTML = `
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-600">
                                ${p.cat}
                            </span>
                            <span class="text-xs text-gray-400">#${String(p.id).padStart(2, '0')}</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2 leading-tight">${p.name}</h3>
                        <p class="text-gray-600 text-sm mb-6 line-clamp-2">${p.desc}</p>
                        
                        <button onclick="openModal(${p.id})" class="w-full py-2 px-4 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 font-medium text-sm transition flex items-center justify-center gap-2">
                            <i class="fas fa-info-circle"></i> Ver Detalles
                        </button>
                    </div>
                    <div class="h-1 w-full bg-gradient-to-r from-transparent via-indigo-500 to-transparent opacity-50"></div>
                `;
                grid.appendChild(card);
            });
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('#projectsGrid > div');

            cards.forEach(card => {
                const title = card.querySelector('h3').innerText.toLowerCase();
                const desc = card.querySelector('p').innerText.toLowerCase();
                if (title.includes(term) || desc.includes(term)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Filter buttons active state
        function filterProjects(cat) {
            renderProjects(cat);

            // Update buttons style
            const buttons = document.querySelectorAll('#categoryFilters button');
            buttons.forEach(btn => {
                if ((cat === 'all' && btn.innerText === 'Todos') || btn.innerText.includes(cat)) {
                    btn.classList.remove('bg-white', 'text-gray-600');
                    btn.classList.add('bg-indigo-600', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-gray-600');
                    btn.classList.remove('bg-indigo-600', 'text-white');
                }
            });
        }

        // Initial render
        renderProjects();

        // Modal functionality
        function openModal(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;

            const modal = document.getElementById('projectModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');

            modalTitle.textContent = `#${String(project.id).padStart(2, '0')} - ${project.name}`;
            
            // Get detailed info from PLANES_PROYECTOS_IOT.md (simplified version)
            const categoryInfo = getCategoryInfo(project.cat);
            const projectDetails = getProjectDetails(project.id, project.cat);

            modalContent.innerHTML = `
                <div class="space-y-6">
                    <div>
                        <span class="inline-block px-3 py-1 rounded-full text-sm font-semibold bg-indigo-100 text-indigo-700 mb-4">
                            ${project.cat}
                        </span>
                        <p class="text-gray-700 text-lg mb-4">${project.desc}</p>
                    </div>

                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900 mb-2 flex items-center gap-2">
                            <i class="fas fa-microchip"></i> Dispositivos IoT
                        </h3>
                        <ul class="list-disc list-inside text-blue-800 space-y-1">
                            ${projectDetails.devices.map(d => `<li>${d}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h3 class="font-bold text-purple-900 mb-2 flex items-center gap-2">
                            <i class="fas fa-exchange-alt"></i> Topics MQTT Principales
                        </h3>
                        <div class="space-y-2">
                            ${projectDetails.topics.map(t => `
                                <div class="bg-white p-2 rounded border-l-4 border-purple-500">
                                    <code class="text-sm text-purple-800">${t.name}</code>
                                    <p class="text-xs text-gray-600 mt-1">${t.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="bg-green-50 p-4 rounded-lg">
                        <h3 class="font-bold text-green-900 mb-2 flex items-center gap-2">
                            <i class="fas fa-sync-alt"></i> Comunicaci√≥n Bidireccional
                        </h3>
                        <p class="text-green-800">${projectDetails.bidirectional}</p>
                    </div>

                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h3 class="font-bold text-orange-900 mb-2 flex items-center gap-2">
                            <i class="fas fa-project-diagram"></i> Flujo de Datos
                        </h3>
                        <ol class="list-decimal list-inside text-orange-800 space-y-1">
                            ${projectDetails.flow.map(f => `<li>${f}</li>`).join('')}
                        </ol>
                    </div>

                    <div class="pt-4 border-t">
                        <a href="PLANES_PROYECTOS_IOT.md" target="_blank" class="text-indigo-600 hover:text-indigo-800 font-medium flex items-center gap-2">
                            <i class="fas fa-book"></i> Ver Plan Completo de Implementaci√≥n
                        </a>
                    </div>
                </div>
            `;

            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('projectModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('projectModal');
            if (event.target == modal) {
                closeModal();
            }
        }

        // Get project details - generates based on project description and category
        function getProjectDetails(id, category) {
            const project = projects.find(p => p.id === id);
            if (!project) return getDefaultDetails(category);

            const categoryPrefix = {
                'Smart City': 'smartcity',
                'Industrial': 'industrial',
                'Healthcare': 'healthcare',
                'Agriculture': 'agriculture',
                'Retail': 'retail',
                'Entertainment': 'entertainment',
                'Security': 'security',
                'Gym': 'gym',
                'Maps': 'maps'
            }[category] || 'project';

            const slug = getFolderSlug(project.name);
            
            // Generate devices based on description keywords
            const devices = generateDevices(project.desc, category);
            
            // Generate topics based on project type
            const topics = generateTopics(project, categoryPrefix, slug);
            
            // Generate bidirectional description
            const bidirectional = generateBidirectional(project.desc, category);
            
            // Generate flow
            const flow = generateFlow(project.desc, category);

            return {
                devices,
                topics,
                bidirectional,
                flow
            };
        }

        function generateDevices(desc, category) {
            const devices = [];
            const lowerDesc = desc.toLowerCase();
            
            if (lowerDesc.includes('sensor')) devices.push('Sensores IoT especializados');
            if (lowerDesc.includes('c√°mara') || lowerDesc.includes('camara') || lowerDesc.includes('video')) devices.push('Sistema de visi√≥n/c√°mara');
            if (lowerDesc.includes('gps') || lowerDesc.includes('ubicaci√≥n') || lowerDesc.includes('localizaci√≥n')) devices.push('M√≥dulo GPS para geolocalizaci√≥n');
            if (lowerDesc.includes('control') || lowerDesc.includes('actuador')) devices.push('Actuadores y controladores');
            if (lowerDesc.includes('display') || lowerDesc.includes('pantalla') || lowerDesc.includes('led')) devices.push('Display/Pantalla LED');
            if (lowerDesc.includes('app') || lowerDesc.includes('m√≥vil') || lowerDesc.includes('movil')) devices.push('Gateway de comunicaci√≥n m√≥vil');
            if (lowerDesc.includes('rfid') || lowerDesc.includes('biom√©trico') || lowerDesc.includes('huella')) devices.push('Lector RFID/Biom√©trico');
            if (lowerDesc.includes('drone') || lowerDesc.includes('dron')) devices.push('Drone con sensores integrados');
            if (lowerDesc.includes('robot') || lowerDesc.includes('rob√≥tico')) devices.push('Sistema rob√≥tico con actuadores');
            if (lowerDesc.includes('bot√≥n') || lowerDesc.includes('boton')) devices.push('Interfaz de botones f√≠sicos');
            
            // Category-specific defaults
            if (devices.length === 0) {
                if (category === 'Smart City') devices.push('Sensores urbanos', 'Gateway LoRaWAN/WiFi', 'Actuadores de control');
                else if (category === 'Industrial') devices.push('Sensores industriales', 'PLC/Controlador', 'Actuadores industriales');
                else if (category === 'Healthcare') devices.push('Sensores biom√©dicos', 'Gateway de datos', 'Sistema de alertas');
                else if (category === 'Agriculture') devices.push('Sensores agr√≠colas', 'Gateway con energ√≠a solar', 'Sistema de riego/control');
                else devices.push('Sensores IoT', 'Gateway de comunicaci√≥n', 'Sistema de control');
            }
            
            return devices;
        }

        function generateTopics(project, prefix, slug) {
            const topics = [
                { name: `${prefix}/${slug}/sensor/datos`, desc: 'Publica datos de sensores en tiempo real' },
                { name: `${prefix}/${slug}/control/set`, desc: 'Subscribe: Comandos de control remoto' },
                { name: `${prefix}/${slug}/estado`, desc: 'Publica estado actual del sistema' }
            ];
            
            const lowerDesc = project.desc.toLowerCase();
            if (lowerDesc.includes('alerta') || lowerDesc.includes('emergencia')) {
                topics.push({ name: `${prefix}/${slug}/alerta`, desc: 'Publica alertas y notificaciones cr√≠ticas' });
            }
            if (lowerDesc.includes('config') || lowerDesc.includes('ajuste')) {
                topics.push({ name: `${prefix}/${slug}/config`, desc: 'Subscribe: Configuraci√≥n de par√°metros' });
            }
            
            return topics;
        }

        function generateBidirectional(desc, category) {
            const lowerDesc = desc.toLowerCase();
            let bidirectional = 'Sensores publican datos continuamente. ';
            
            if (lowerDesc.includes('app') || lowerDesc.includes('m√≥vil') || lowerDesc.includes('movil')) {
                bidirectional += 'Aplicaci√≥n m√≥vil subscribe a datos y puede enviar comandos. ';
            }
            if (lowerDesc.includes('dashboard') || lowerDesc.includes('monitoreo')) {
                bidirectional += 'Dashboard central permite monitoreo y control remoto. ';
            }
            if (lowerDesc.includes('autom√°tico') || lowerDesc.includes('automatico')) {
                bidirectional += 'Sistema ejecuta acciones autom√°ticas basadas en datos de sensores. ';
            }
            
            bidirectional += 'Comunicaci√≥n bidireccional permite control en tiempo real y respuesta inmediata a eventos.';
            
            return bidirectional;
        }

        function generateFlow(desc, category) {
            const flow = [
                'Sensores IoT capturan datos del entorno',
                'Datos se publican v√≠a MQTT al broker',
                'Sistema procesa y analiza informaci√≥n',
                'Dashboard muestra estado en tiempo real'
            ];
            
            const lowerDesc = desc.toLowerCase();
            if (lowerDesc.includes('alerta') || lowerDesc.includes('emergencia')) {
                flow.push('Sistema genera alertas autom√°ticas cuando detecta anomal√≠as');
            }
            if (lowerDesc.includes('control') || lowerDesc.includes('actuador')) {
                flow.push('Operador puede enviar comandos de control remoto');
                flow.push('Actuadores ejecutan acciones seg√∫n comandos recibidos');
            }
            if (lowerDesc.includes('app') || lowerDesc.includes('m√≥vil')) {
                flow.push('Aplicaci√≥n m√≥vil recibe notificaciones y permite interacci√≥n');
            }
            
            return flow;
        }

        function getDefaultDetails(category) {
            return {
                devices: ['Sensores IoT', 'Gateway de comunicaci√≥n', 'Sistema de control'],
                topics: [
                    { name: 'project/sensor/datos', desc: 'Datos de sensores' },
                    { name: 'project/control/set', desc: 'Comandos de control' },
                    { name: 'project/estado', desc: 'Estado del sistema' }
                ],
                bidirectional: 'Comunicaci√≥n bidireccional entre sensores, actuadores y sistema de control.',
                flow: [
                    'Sensores publican datos',
                    'Sistema procesa informaci√≥n',
                    'Dashboard muestra estado',
                    'Control remoto disponible'
                ]
            };
        }

        function getCategoryInfo(category) {
            const info = {
                'Smart City': 'Proyectos para ciudades inteligentes y gesti√≥n urbana',
                'Industrial': 'Soluciones para automatizaci√≥n y monitoreo industrial',
                'Healthcare': 'Aplicaciones de salud y bienestar',
                'Agriculture': 'Tecnolog√≠a para agricultura y ganader√≠a',
                'Retail': 'Soluciones para comercio y retail',
                'Entertainment': 'Proyectos de entretenimiento y ocio',
                'Security': 'Sistemas de seguridad y vigilancia',
                'Gym': 'Aplicaciones para gimnasios y fitness',
                'Maps': 'Sistemas de mapeo y geolocalizaci√≥n'
            };
            return info[category] || '';
        }

    </script>
</body>

</html>